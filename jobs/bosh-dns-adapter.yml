---
name: bosh-dns-adapter
release: cf-networking
consumes: |
  service-discovery-controller: {from: service-discovery-controller, deployment: (( ..cf.deployment_name )) }
manifest: |
  cf_app_sd_disable: "(( ..cf.properties.enable_service_discovery_for_apps.value ? false : true ))"
  dnshttps:
    client:
      tls:
        certificate: (( .properties.service_discovery_client_tls.cert_pem ))
        private_key: (( .properties.service_discovery_client_tls.private_key_pem ))
    server:
      ca: (( $ops_manager.ca_certificate ))
