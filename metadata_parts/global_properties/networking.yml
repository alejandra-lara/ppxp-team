---
property_blueprints:
  - name: networking_point_of_entry
    type: selector
    configurable: true
    default: terminate_at_router
    option_templates:
      - name: terminate_at_router
        select_value: terminate_at_router
        property_blueprints:
          - name: ssl_rsa_certificate
            type: rsa_cert_credentials
            configurable: true
          - name: ssl_ciphers
            type: text
            configurable: true
            optional: true
        named_manifests:
          - name: ssl_ciphers
            manifest: (( .properties.networking_point_of_entry.terminate_at_router.ssl_ciphers.value ))
          - name: enable_ssl
            manifest: "true"
          - name: cert_pem
            manifest: (( .properties.networking_point_of_entry.terminate_at_router.ssl_rsa_certificate.cert_pem ))
          - name: private_key_pem
            manifest: (( .properties.networking_point_of_entry.terminate_at_router.ssl_rsa_certificate.private_key_pem ))
      - name: terminate_at_router_ert_cert
        select_value: terminate_at_router_ert_cert
        named_manifests:
          - name: ssl_ciphers
            manifest: (( ..cf.properties.networking_point_of_entry.external_ssl.ssl_ciphers.value ))
          - name: enable_ssl
            manifest: "true"
          - name: cert_pem
            manifest: (( ..cf.properties.networking_poe_ssl_cert.cert_pem ))
          - name: private_key_pem
            manifest: (( ..cf.properties.networking_poe_ssl_cert.private_key_pem ))
      - name: terminate_before_router
        select_value: terminate_before_router
        named_manifests:
          - name: enable_ssl
            manifest: "false"
          - name: ssl_ciphers
            manifest: ""
          - name: cert_pem
            manifest: ""
          - name: private_key_pem
            manifest: ""
  - name: routing_table_sharding_mode
    type: selector
    configurable: true
    default: isolation_segment_only
    option_templates:
    - name: isolation_segment_only
      select_value: isolation_segment_only
      named_manifests:
      - name: sharding_mode
        manifest: |
          segments
      - name: isolation_segments
        manifest: |
          ['(( .isolated_diego_cell.placement_tag.value ))']
      - name: routing_api_enabled
        manifest: |
          false
    - name: no_isolation_segment
      select_value: no_isolation_segment
      named_manifests:
      - name: sharding_mode
        manifest: |
          shared-and-segments
      - name: isolation_segments
        manifest: |
          []
      - name: routing_api_enabled
        manifest: |
          true
  - name: c2c_iptables_logging
    type: selector
    configurable: true
    default: disabled
    option_templates:
    - name: enabled
      select_value: enabled
      named_manifests:
      - name: cf_networking_iptables_logging
        manifest: |
          true
      - name: cf_networking_iptables_udp_logging_interval
        manifest: (( .properties.c2c_iptables_logging.enabled.udp_logging_interval.value ))
      - name: cf_networking_iptables_denied_logging_interval
        manifest: (( .properties.c2c_iptables_logging.enabled.denied_logging_interval.value ))
      property_blueprints:
        - name: denied_logging_interval
          type: integer
          configurable: true
          default: 1
        - name: udp_logging_interval
          type: integer
          configurable: true
          default: 100
    - name: disabled
      select_value: disabled
      named_manifests:
      - name: cf_networking_iptables_logging
        manifest: |
          false
      - name: cf_networking_iptables_udp_logging_interval
        manifest: |
          null
      - name: cf_networking_iptables_denied_logging_interval
        manifest: |
          null
  - name: router_forward_client_cert
    type: selector
    configurable: true
    default: always_forward
    option_templates:
      - name: always_forward
        select_value: always_forward
      - name: forward
        select_value: forward
      - name: sanitize_set
        select_value: sanitize_set
