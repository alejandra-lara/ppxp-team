resources:
  - name: p-runtime
    type: git
    source:
      uri: git@github.com:pivotal-cf/p-runtime.git
      branch: master
      private_key: &p-runtime-read-only-deploy-key |
        -----BEGIN RSA PRIVATE KEY-----
        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
        -----END RSA PRIVATE KEY-----

  - name: p-runtime-prime
    type: git
    source:
      uri: git@github.com:pivotal-cf/p-runtime.git
      branch: master
      private_key: &p-runtime-read-write-deploy-key |
        -----BEGIN RSA PRIVATE KEY-----
        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
        -----END RSA PRIVATE KEY-----

  - name: version
    type: semver
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      key: ert-1.6/version
      initial_version: 1.6.0-build.0

  - name: environment-vsphere
    type: pool
    source:
      uri: git@github.com:pivotal-cf-experimental/releng-env-resource-pool
      branch: master
      pool: vsphere
      private_key: &env_private_key |
        -----BEGIN RSA PRIVATE KEY-----
        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
        -----END RSA PRIVATE KEY-----

  - name: environment-aws
    type: pool
    source:
      uri: git@github.com:pivotal-cf-experimental/releng-env-resource-pool
      branch: master
      pool: aws
      private_key: *env_private_key

  - name: environment-internetless
    type: pool
    source:
      uri: git@github.com:pivotal-cf-experimental/releng-env-resource-pool
      branch: master
      pool: internetless
      private_key: *env_private_key

  - name: environment-openstack
    type: pool
    source:
      uri: git@github.com:pivotal-cf-experimental/releng-env-resource-pool
      branch: master
      pool: openstack
      private_key: *env_private_key

  - name: environment-vcloud
    type: pool
    source:
      uri: git@github.com:pivotal-cf-experimental/releng-env-resource-pool
      branch: master
      pool: vcloud
      private_key: *env_private_key

  - name: ops-manager-1.6.0-aws
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ops_manager_images/aws/1.6.0/ops_man_image

  - name: ops-manager-1.6.0-openstack
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ops_manager_images/openstack/1.6.0/ops_man_image

  - name: ops-manager-1.6.0-vsphere
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ops_manager_images/vsphere/1.6.0/ops_man_image

  - name: ops-manager-1.6.0-vcloud
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ops_manager_images/vcloud/1.6.0/ops_man_image

  - name: initial-ert-product
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ert-releases/1.5.4.0/ert.pivotal

  - name: ops-manager-1.5.5.0-aws
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ops_manager_images/aws/1.5.5.0/ops_man_image

  - name: ops-manager-1.5.5.0-openstack
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ops_manager_images/openstack/1.5.5.0/ops_man_image

  - name: ops-manager-1.5.5.0-vsphere
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ops_manager_images/vsphere/1.5.5.0/ops_man_image

  - name: ops-manager-1.5.5.0-vcloud
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ops_manager_images/vcloud/1.5.5.0/ops_man_image

  - name: exported-installation-aws
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: exported_installations/master/aws/installation.zip

  - name: exported-installation-openstack
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: exported_installations/master/openstack/installation.zip

  - name: exported-installation-vsphere
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: exported_installations/master/vsphere/installation.zip

  - name: exported-installation-vcloud
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: exported_installations/master/vcloud/installation.zip

  - name: ert-product
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ert-1.6/untested/ert.pivotal

  - name: ert-product-promoted-deprecated
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: ert-1.6/tested/ert.pivotal

  - name: ert-product-promoted
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      regexp: ert-1.6/tested/cf-(.*).pivotal

  - name: ert-product-final
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      regexp: ert-releases/cf-(.*).pivotal

  - name: ert-product-pivnet
    type: s3
    source:
      access_key_id: AKIAIRCTC4OQSJ6CCRUA
      secret_access_key: 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
      bucket: pivotalnetwork
      region_name: us-west-1
      private: true
      regexp: product_files/Pivotal-CF/cf-(.*).pivotal

  - name: ert-sha-email
    type: email
    source:
      from: cf-release-engineering+ci@pivotal.io
      smtp:
        host: email-smtp.us-east-1.amazonaws.com
        password: AnjX76InfJ5blO6GIb0i8n3oHzJjWfc+TSPUG3OFz012
        port: "587"
        username: AKIAJKHOMDGN7ZRW75JQ
      to:
      - cf-release-engineering+ci@pivotal.io
      - pcf-security-eng+ert+ci@pivotal.io

  - name: cats-logs
    type: s3
    source:
      access_key_id: AKIAJEAGY2FWB7DEGFXQ
      secret_access_key: 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
      bucket: ert-concourse-products
      region_name: us-west-1
      private: true
      versioned_file: cf-acceptance-tests-logs/cats-log.tgz

jobs:
  - name: kickoff
    plan:
      - get: p-runtime
        resource: p-runtime-prime

  - name: kickoff-pre-heat
    plan:
      - get: p-runtime

  - name: build-runtime
    plan:
      - get: version
        params:
          pre: build
      - put: version
        params:
          file: version/number
      - get: p-runtime
        resource: p-runtime-prime
        trigger: true
        passed: [kickoff]
      - task: build-product
        file: p-runtime/ci/jobs/build-pivotal.yml
      - aggregate:
        - put: ert-product
          params:
            from: build-product/ert.pivotal
        - put: p-runtime
          resource: p-runtime-prime
          params:
            repository: p-runtime
            tag: version/number
            tag_prefix: v
        - task: compose-email
          file: p-runtime/ci/jobs/compose-email.yml
          config:
            params:
              file_to_hash: build-product/ert.pivotal
              output_body_file: generated-body
              output_subject_file: generated-subject
      - put: ert-sha-email
        params:
          body: compose-email/generated-body
          subject: compose-email/generated-subject

  - name: promote-ert
    plan:
      - get: p-runtime
        resource: p-runtime-prime
        trigger: true
      - get: version
        passed: [build-runtime]
      - get: ert-pivotal
        resource: ert-product
        passed: [build-runtime]
      - put: ert-product-promoted-deprecated
        params:
          from: ert-pivotal/ert.pivotal
      - task: create-versioned-pivotal
        file: p-runtime/ci/jobs/create-versioned-pivotal.yml
      - put: ert-product-promoted
        params:
          from: ert-pivotal/cf-(.*).pivotal

  - name: upload-to-pivnet
    plan:
      - get: ert-product-promoted
        passed: [promote-ert]
      - put: ert-product-pivnet
        params:
          from: ert-product-promoted/cf-(.*).pivotal
          to: product_files/Pivotal-CF/

  - name: mark-as-final
    plan:
      - get: version
        params:
          bump: final
      - put: version
        params:
          file: version/number
      - get: p-runtime
        resource: p-runtime-prime
        passed: [promote-ert]
      - put: p-runtime
        resource: p-runtime-prime
        params:
          repository: p-runtime
          tag: version/number
          tag_prefix: v

  - name: publish-final
    plan:
      - get: p-runtime
        resource: p-runtime-prime
        passed: [promote-ert,mark-as-final]
        trigger: true
      - get: ert-pivotal
        resource: ert-product-promoted
        passed: [promote-ert]
      - get: version
        passed: [mark-as-final]
        trigger: true
      - task: create-versioned-pivotal
        file: p-runtime/ci/jobs/create-versioned-pivotal.yml
      - put: ert-product-final
        params:
          from: ert-pivotal/cf-(.*).pivotal
          to: ert-releases/
      - put: ert-product-pivnet
        params:
          from: ert-pivotal/cf-(.*).pivotal
          to: product_files/Pivotal-CF/

  - name: bump-to-next-patch-version
    plan:
      - get: version
        passed: [publish-final]
        trigger: true
        params:
          bump: patch
      - put: version
        params:
          file: version/number

groups:
  - name: aws-clean
    jobs:
    - claim-environment-aws-clean
    - early-destroy-environment-aws-clean
    - early-release-environment-aws-clean
    - destroy-environment-aws-clean
    - deploy-ops-manager-aws-clean
    - configure-microbosh-aws-clean
    - deploy-microbosh-aws-clean
    - upload-pivotal-aws-clean
    - configure-ert-aws-clean
    - deploy-ert-aws-clean
    - run-cats-aws-clean
    - destroy-environment-final-aws-clean
    - release-environment-aws-clean

  - name: openstack-clean
    jobs:
    - claim-environment-openstack-clean
    - early-destroy-environment-openstack-clean
    - early-release-environment-openstack-clean
    - destroy-environment-openstack-clean
    - deploy-ops-manager-openstack-clean
    - configure-microbosh-openstack-clean
    - deploy-microbosh-openstack-clean
    - upload-pivotal-openstack-clean
    - configure-ert-openstack-clean
    - deploy-ert-openstack-clean
    - run-cats-openstack-clean
    - destroy-environment-final-openstack-clean
    - release-environment-openstack-clean

  - name: vsphere-clean
    jobs:
    - claim-environment-vsphere-clean
    - early-destroy-environment-vsphere-clean
    - early-release-environment-vsphere-clean
    - destroy-environment-vsphere-clean
    - deploy-ops-manager-vsphere-clean
    - configure-microbosh-vsphere-clean
    - deploy-microbosh-vsphere-clean
    - upload-pivotal-vsphere-clean
    - configure-ert-vsphere-clean
    - deploy-ert-vsphere-clean
    - run-cats-vsphere-clean
    - destroy-environment-final-vsphere-clean
    - release-environment-vsphere-clean

  - name: vsphere-internetless
    jobs:
    - claim-environment-internetless
    - early-destroy-environment-internetless
    - early-release-environment-internetless
    - destroy-environment-internetless
    - deploy-ops-manager-internetless
    - verify-internetless
    - configure-microbosh-internetless
    - deploy-microbosh-internetless
    - upload-pivotal-internetless
    - configure-ert-internetless
    - deploy-ert-internetless
    - run-cats-internetless
    - destroy-environment-final-internetless
    - release-environment-internetless

  - name: aws-upgrade
    jobs:
    - claim-environment-aws-upgrade
    - early-destroy-environment-aws-upgrade
    - early-release-environment-aws-upgrade
    - destroy-environment-aws-upgrade
    - deploy-ops-manager-initial-aws-upgrade
    - configure-microbosh-initial-aws-upgrade
    - deploy-microbosh-initial-aws-upgrade
    - upload-pivotal-initial-aws-upgrade
    - configure-ert-initial-aws-upgrade
    - deploy-ert-initial-aws-upgrade
    - export-installation-aws-upgrade
    - destroy-opsman-aws-upgrade
    - deploy-opsman-aws-upgrade
    - import-installation-aws-upgrade
    - upgrade-pivotal-aws-upgrade
    - configure-ert-aws-upgrade
    - deploy-ert-aws-upgrade
    - run-cats-aws-upgrade
    - destroy-environment-final-aws-upgrade
    - release-environment-aws-upgrade

  - name: vsphere-upgrade
    jobs:
    - claim-environment-vsphere-upgrade
    - early-destroy-environment-vsphere-upgrade
    - early-release-environment-vsphere-upgrade
    - destroy-environment-vsphere-upgrade
    - deploy-ops-manager-initial-vsphere-upgrade
    - configure-microbosh-initial-vsphere-upgrade
    - deploy-microbosh-initial-vsphere-upgrade
    - upload-pivotal-initial-vsphere-upgrade
    - configure-ert-initial-vsphere-upgrade
    - deploy-ert-initial-vsphere-upgrade
    - export-installation-vsphere-upgrade
    - destroy-opsman-vsphere-upgrade
    - deploy-opsman-vsphere-upgrade
    - import-installation-vsphere-upgrade
    - upgrade-pivotal-vsphere-upgrade
    - configure-ert-vsphere-upgrade
    - deploy-ert-vsphere-upgrade
    - run-cats-vsphere-upgrade
    - destroy-environment-final-vsphere-upgrade
    - release-environment-vsphere-upgrade

  - name: vcloud-upgrade
    jobs:
    - claim-environment-vcloud-upgrade
    - early-destroy-environment-vcloud-upgrade
    - early-release-environment-vcloud-upgrade
    - destroy-environment-vcloud-upgrade
    - deploy-ops-manager-initial-vcloud-upgrade
    - configure-microbosh-initial-vcloud-upgrade
    - deploy-microbosh-initial-vcloud-upgrade
    - upload-pivotal-initial-vcloud-upgrade
    - configure-ert-initial-vcloud-upgrade
    - deploy-ert-initial-vcloud-upgrade
    - export-installation-vcloud-upgrade
    - destroy-opsman-vcloud-upgrade
    - deploy-opsman-vcloud-upgrade
    - import-installation-vcloud-upgrade
    - upgrade-pivotal-vcloud-upgrade
    - configure-ert-vcloud-upgrade
    - deploy-ert-vcloud-upgrade
    - run-cats-vcloud-upgrade
    - destroy-environment-final-vcloud-upgrade
    - release-environment-vcloud-upgrade

  - name: common
    jobs:
      - kickoff
      - kickoff-pre-heat
      - build-runtime
      - promote-ert
      - upload-to-pivnet
      - mark-as-final
      - publish-final
    resources:
      - ops-manager-1.6.0-aws
      - ops-manager-1.6.0-vsphere
      - ops-manager-1.6.0-vcloud
      - ops-manager-1.6.0-openstack
