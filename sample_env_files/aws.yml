name: ugli
iaas_type: aws
vm_shepherd:
  env_config:
    stack_name: ugli
    aws_access_key: _ACCESS_KEY_
    aws_secret_key: _SECRET_KEY_
    region: us-west-1
    json_file: config/ert_cloudformation.json
    parameters:
      05RdsUsername: pivotalcf
      06RdsPassword: pivotalcf
      07SSLCertificateARN: arn:aws:iam::_CERT_ID_:server-certificate/ugli
    outputs:
      instance_profile:
      ssh_key_name: {{ssh_key_pair_name}}
      security_group: {{ops_manager_security_group_id}}
      public_subnet_id: {{public_subnet_id}}
      private_subnet_id: {{private_subnet_id}}
      s3_bucket_names:
        - {{ ops_manager_s3_bucket_name }}
        - {{ ert_s3_buildpacks_bucket_name }}
        - {{ ert_s3_droplets_bucket_name }}
        - {{ ert_s3_packages_bucket_name }}
        - {{ ert_s3_resources_bucket_name }}
  vm_configs:
    - vm_name: Ugli OpsManager
      key_name: {{ssh_key_pair_name}}
      vm_ip_address: _OM_IP_ADDRESS_

ops_manager:
  url: https://pcf.ugli.cf-app.com/
  username: _OM_USERNAME_
  password: _OM_PASSWORD_
  ntp_servers: 0.amazon.pool.ntp.org
  availability_zones:
  - iaas_identifier: us-west-1b

  aws:
    aws_access_key: {{iam_aws_access_key_id}}
    aws_secret_key: {{iam_aws_secret_access_key}}
    vpc_id: {{vpc}}
    security_group: {{vms_security_group_name}}
    security_group_id: {{vms_security_group_id}}
    key_pair_name: {{ssh_key_pair_name}}
    region: {{region}}
    ssh_key: _KEY_

  networks:
  - name: first-network
    identifier: {{ private_subnet_id }}
    subnet: 10.0.16.0/20
    reserved_ips: 10.0.16.2-10.0.16.4
    dns: 10.0.0.2
    gateway: 10.0.16.1
    subnets:
    - identifier: {{ private_subnet_id }}
      cidr: 10.0.16.0/20
      reserved_ips: 10.0.16.2-10.0.16.4
      dns: 10.0.0.2
      gateway: 10.0.16.1
      availability_zones: [us-west-1b]

  elastic_runtime:
    name: cf
    system_domain: ugli.cf-app.com
    apps_domain: ugli.cf-app.com
    elb_name: ugli-pcf-elb
    elb_dns_name: {{ ert_elb_dns_name }}
    ssh_elb_name: ugli-pcf-ssh-elb
    ssh_elb_dns_name: {{ ert_ssh_elb_dns_name }}
    tcp_elb_name: ugli-pcf-tcp-elb
    tcp_elb_dns_name: {{ ert_tcp_elb_dns_name }}
    file_storage:
      endpoint: https://s3-us-west-1.amazonaws.com
      bucket: {{ ert_s3_buildpacks_bucket_name }}
      buildpacks_bucket: {{ ert_s3_buildpacks_bucket_name }}
      droplets_bucket: {{ ert_s3_droplets_bucket_name }}
      packages_bucket: {{ ert_s3_packages_bucket_name }}
      resources_bucket: {{ ert_s3_resources_bucket_name }}
      access_key: {{iam_aws_access_key_id}}
      secret_key: {{iam_aws_secret_access_key}}
    rds:
      host: {{rds_address}}
      port: {{rds_port}}
      username: {{rds_username}}
      password: {{rds_password}}
    smtp:
      from: identitystaging@mailinator.com
      address: smtp.sendgrid.net
      port: 587
      credentials:
        identity: _USERNAME_
        password: _PASSWORD_
      enable_starttls_auto: true
      smtp_auth_mechanism: plain
    trust_self_signed_certificates: true
    ssl_certificate: _CERT_
    ssl_private_key: _KEY_
