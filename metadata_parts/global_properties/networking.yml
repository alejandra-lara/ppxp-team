---
property_blueprints:
  - name: networking_poe_ssl_cert
    type: collection
    configurable: true
    property_blueprints:
      - name: cert_chain
        type: text
        optional: false
      - name: private_key
        type: text
        optional: false

  - name: routing_disable_http
    type: boolean
    configurable: true
    default: false

  - name: routing_minimum_tls_version
    type: selector
    configurable: true
    default: tls_v1_2
    option_templates:
      - name: tls_v1_0
        select_value: tls_v1_0
        named_manifests:
          - name: min_tls_version
            manifest: |
              TLSv1.0
          - name: disable_tls_10
            manifest: |
              false
          - name: disable_tls_11
            manifest: |
              false
      - name: tls_v1_1
        select_value: tls_v1_1
        named_manifests:
          - name: min_tls_version
            manifest: |
              TLSv1.1
          - name: disable_tls_10
            manifest: |
              true
          - name: disable_tls_11
            manifest: |
              false
      - name: tls_v1_2
        select_value: tls_v1_2
        named_manifests:
          - name: min_tls_version
            manifest: |
              TLSv1.2
          - name: disable_tls_10
            manifest: |
              true
          - name: disable_tls_11
            manifest: |
              true

  - name: gorouter_ssl_ciphers
    type: text
    configurable: true
    default: ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384

  - name: haproxy_ssl_ciphers
    type: text
    configurable: true
    default: DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384

  - name: doppler_ssl_ciphers
    type: text
    configurable: true
    default: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256:TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384

  - name: metron_ssl_ciphers
    type: text
    configurable: true
    default: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256:TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384

  - name: haproxy_max_buffer_size
    type: integer
    configurable: true
    default: 16384

  - name: haproxy_forward_tls
    type: selector
    configurable: true
    default: enable
    option_templates:
    - name: enable
      select_value: enable
      named_manifests:
        - name: backend_port
          manifest: |
            443
        - name: backend_ssl
          manifest: |
            "verify"
      property_blueprints:
      - name: backend_ca
        type: text
        configurable: true
    - name: disable
      select_value: disable
      named_manifests:
        - name: backend_port
          manifest: |
            80
        - name: backend_ssl
          manifest: |
            "off"

  - name: tcp_routing
    type: selector
    configurable: true
    default: disable
    option_templates:
    - name: disable
      select_value: disable
      named_manifests:
        - name: default_router_group
          manifest: |
            []
    - name: enable
      select_value: enable
      named_manifests:
        - name: default_router_group
          manifest: |
            - name: default-tcp
              reservable_ports: (( .properties.tcp_routing.enable.reservable_ports.value ))
              type: tcp
      property_blueprints:
        - name: reservable_ports
          type: string
          configurable: true
          placeholder: "e.g: 1024-10000,65535"

  - name: router_forward_client_cert
    type: selector
    configurable: true
    default: always_forward
    option_templates:
      - name: always_forward
        select_value: always_forward
      - name: forward
        select_value: forward
      - name: sanitize_set
        select_value: sanitize_set

  - name: router_backend_max_conn
    type: integer
    configurable: true
    default: 0

  - name: route_services
    type: selector
    configurable: true
    default: enable
    option_templates:
      - name: enable
        select_value: enable
        named_manifests:
          - name: secret
            manifest: |
              (( .router.route_services_secret.value ))
        property_blueprints:
          - name: ignore_ssl_cert_verification
            type: boolean
            configurable: true
            default: false
      - name: disable
        select_value: disable
        named_manifests:
          - name: secret
            manifest: |

  - name: container_networking_network_cidr
    type: string
    configurable: true
    optional: true

  - name: container_networking_vtep_port
    type: integer
    configurable: true
    default: 4789

  - name: container_networking_log_traffic
    type: selector
    configurable: true
    default: disable
    option_templates:
    - name: enable
      select_value: enable
      property_blueprints:
      - name: iptables_denied_logs_per_sec
        type: integer
        configurable: true
        default: 1
      - name: iptables_accepted_udp_logs_per_sec
        type: integer
        configurable: true
        default: 100

    - name: disable
      select_value: disable

  - name: network_policy_server_cert
    type: rsa_cert_credentials
    default:
      domains:
        - network-policy-server.service.cf.internal
        - "*.network-policy-server.service.cf.internal"

  - name: network_policy_agent_cert
    type: rsa_cert_credentials

  - name: networking_point_of_entry
    type: selector
    configurable: true
    default: haproxy
    option_templates:
    - name: haproxy
      select_value: haproxy
    - name: external_ssl
      select_value: external_ssl

  - name: container_networking
    type: selector
    configurable: true
    default: enable
    option_templates:
    - name: enable
      select_value: enable
    - name: disable
      select_value: disable
