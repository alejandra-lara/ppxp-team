---
name: route_registrar
alias: route_registrar_loggregator_trafficcontroller
release: routing
manifest: |

  logging:
    format:
      timestamp: (( .properties.logging_timestamp_format.selected_option.parsed_manifest(rfc3339_or_deprecated) ))
  route_registrar:
    routes:
    - name: doppler
      tls_port: 8081
      registration_interval: 20s
      server_cert_domain_san: "doppler.service.cf.internal"
      uris:
      - "doppler.(( .cloud_controller.system_domain.value ))"
      - "*.doppler.(( .cloud_controller.system_domain.value ))"
    - name: rlp-gateway
      tls_port: 8088
      registration_interval: 20s
      server_cert_domain_san: "reverse-log-proxy.service.cf.internal"
      uris:
      - "log-stream.(( .cloud_controller.system_domain.value ))"
      - "*.log-stream.(( .cloud_controller.system_domain.value ))"
