---
name: app_containers
label: Application Containers
description: |
  Enable microservice frameworks, private Docker registries, and other
  services that support your applications at a container level.
property_inputs:
- reference: .cloud_controller.enable_custom_buildpacks
  label: Enable Custom Buildpacks
  description: Enable custom-built application runtime buildpacks.

- reference: .cloud_controller.allow_app_ssh_access
  label: Allow SSH access to app containers
  description: |
    If you are using a load balancer instead of HAProxy, to enable SSH
    traffic ensure that your load balancer has port 2222 open. PCF users can
    give SSH access to an app only if an admin assigns them a Space Developer
    role in the space that the app runs in. Admins can grant this role in
    Apps Manager or via the cf CLI.

- reference: .cloud_controller.default_app_ssh_access
  label: Enable SSH when an app is created
  description: |
    When enabled and the space has SSH enabled, a new app will have SSH
    enabled. Turning this feature off will disable SSH for new apps but allow
    developers to enable it when necessary.

- reference: .properties.route_integrity
  label: Router application identity verification
  selector_property_inputs:
  - reference: .properties.route_integrity.tls_verify
    label: Router uses TLS to verify application identity (Default)
  - reference: .properties.route_integrity.mutual_tls_verify
    label: Router and applications use mutual TLS to verify each other's identity (incompatible with TCP Routing)

- reference: .diego_cell.insecure_docker_registry_list
  label: Private Docker Insecure Registry Whitelist
  description: |
    If you use private Docker image registries that are secured with
    self-signed certificates, enter them here as a comma-delimited list. List
    each registry as either an IP:Port tuple or a Hostname:Port tuple.
  placeholder: |
    10.10.10.10:8888,example.com:8888

- reference: .properties.garden_disk_cleanup
  label: Docker Images Disk-Cleanup Scheduling on Cell VMs
  selector_property_inputs:
  - reference: .properties.garden_disk_cleanup.never
    label: Never clean up Cell disk-space

  - reference: .properties.garden_disk_cleanup.routine
    label: Routinely clean up Cell disk-space

  - reference: .properties.garden_disk_cleanup.reserved
    label: Clean up disk-space once usage fills disk
    property_inputs:
      - reference: .properties.garden_disk_cleanup.reserved.reserved_space_for_other_jobs_in_mb
        label: Reserved disk space for other jobs(MB)
        description: |
          Amount of space the GC algorithm should attempt to keep free for other jobs.
          GC will delete  unneeded layers as needed to keep this space free (but it cannot guarantee this
           space remains free if more containers are created than disk space allows).

- reference: .properties.enable_garden_containerd_mode
  label: Enable Containerd Delegation
  description: |
    Garden delegates container create and destroy operations to containerd
    in an effort to use more industry standard container runtime tooling. This
    may be opted-out of. In the future garden will delegate all container
    operations to containerd.

- reference: .diego_brain.starting_container_count_maximum
  label: Max Inflight Container Starts
  description: |
    Maximum number of inflight container starts allowed globally. Value of 0
    or less indicates no limit.

- reference: .properties.nfs_volume_driver
  label: |
    Enabling NFSv3 volume services will allow application developers to bind
    existing NFS volumes to their applications for shared file access.
  selector_property_inputs:
    - reference: .properties.nfs_volume_driver.enable
      label: Enable
      property_inputs:
        - reference: .properties.nfs_volume_driver.enable.ldap_service_account_user
          label: LDAP Service Account User
          description : |
            Service Account User name (required for LDAP integration only)

        - reference: .properties.nfs_volume_driver.enable.ldap_service_account_password
          label: LDAP Service Account Password
          description: |
            Service Account Password (required for LDAP integration only)

        - reference: .properties.nfs_volume_driver.enable.ldap_server_host
          label: LDAP Server Host
          description: |
            Server hostname or IP address (required for LDAP integration only)

        - reference: .properties.nfs_volume_driver.enable.ldap_server_port
          label: LDAP Server Port
          description: |
            Server port (required for LDAP integration only). Defaults to 389.

        - reference: .properties.nfs_volume_driver.enable.ldap_user_fqdn
          label: LDAP User Search Base
          description: |
            The location in the LDAP directory tree from which any LDAP User
            search begins. The typical LDAP Search Base matches your domain
            name. For example, it can be specified as
            "cn=Users,dc=corp,dc=test,dc=com". Required for LDAP integration
            only.
          placeholder: "cn=Users,dc=corp,dc=test,dc=com"

        - reference: .properties.nfs_volume_driver.enable.ldap_ca_cert
          label: LDAP Server CA Cert
          description: |
            Server CA certificate (required for LDAP integration with SSL only)

    - reference: .properties.nfs_volume_driver.disable
      label: Disable

- reference: .properties.enable_smb_volume_driver
  label: Enable SMB volume services
  description: |
    Enabling SMB volume services will allow application developers to bind
    existing SMB shares to their applications for shared file access.
    Also requires enabling the SMB Broker Errand as it is disabled by default.

- reference: .properties.diego_log_timestamp_format
  label: Format of timestamps in Diego logs
  selector_property_inputs:
  - reference: .properties.diego_log_timestamp_format.rfc3339
    label: RFC3339 timestamps (e.g. 2018-02-09T00:54:13.479724884Z)

  - reference: .properties.diego_log_timestamp_format.unix-epoch
    label: Seconds since the Unix epoch (e.g. 1518137653.479724884)

- reference: .properties.cloud_controller_default_health_check_timeout
  label: Default health check timeout
  description: |
    Warning: Decreasing this below it's current value may cause existing applications with startup times greater than the new value to fail to start up.
