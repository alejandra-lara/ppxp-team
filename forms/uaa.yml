---
name: uaa
label: UAA
description: |
  Configure the User Account and Authentication Server

verifiers:
- name: Verifiers::MysqlDatabaseVerifier
  properties:
    host: .properties.uaa_database.external.host
    port: .properties.uaa_database.external.port
    username: .properties.uaa_database.external.uaa_username
    password: .properties.uaa_database.external.uaa_password
    database: .properties.uaa_database_name

property_inputs:
- reference: .properties.uaa_database
  label: |
    Choose the location of your UAA database
  selector_property_inputs:
  - reference: .properties.uaa_database.internal_mysql
    label: |
      PAS database (configured on the Databases pane)

  - reference: .properties.uaa_database.external
    label: |
      Other external database
    property_inputs:
      - reference: .properties.uaa_database.external.host
        label: Hostname

      - reference: .properties.uaa_database.external.port
        label: TCP Port

      - reference: .properties.uaa_database.external.uaa_username
        label: Username

      - reference: .properties.uaa_database.external.uaa_password
        label: Password

      - reference: .properties.uaa_database.external.ca_cert
        label: CA Certificate
        description: |
          UAA requires the database to present a valid hostname in order
          to validate the certificate when terminating TLS.
          AWS does currently provide a valid hostname, but some other cloud
          providers do not currently do this (GCP and Azure).

- reference: .uaa.issuer_uri
  label: JWT Issuer URI
  description: When generating tokens, UAA will use this URI as the issuer.

- reference: .uaa.service_provider_key_credentials
  label: SAML Service Provider Credentials
  description: Private key and certificate for the service provider.

- reference: .uaa.service_provider_key_password
  label: SAML Service Provider Key Password
  description: Passphrase for the service provider private key.

- reference: .properties.saml_entity_id_override
  label: SAML Entity ID Override
  description: |
    An entry in this field overrides the default Entity ID value of
    "http://login.<system-domain>". The <system-domain> portion of
    that default is configured on the "Domains" tab.

- reference: .properties.saml_signature_algorithm
  label: Signature Algorithm
  description: |
    The supported algorithm for signed requests and assertions.

- reference: .uaa.apps_manager_access_token_lifetime
  label: Apps Manager Access Token Lifetime (in seconds)
  description: Set the lifetime of the access token for Apps Manager.

- reference: .uaa.apps_manager_refresh_token_lifetime
  label: Apps Manager Refresh Token Lifetime (in seconds)
  description: Set the lifetime of the refresh token for Apps Manager.

- reference: .uaa.cf_cli_access_token_lifetime
  label: Cloud Foundry CLI Access Token Lifetime (in seconds)
  description: Set the lifetime of the access token for the `cf` CLI.

- reference: .uaa.cf_cli_refresh_token_lifetime
  label: Cloud Foundry CLI Refresh Token Lifetime (in seconds)
  description: Set the lifetime of the refresh token for the `cf` CLI.

- reference: .properties.uaa_session_cookie_max_age
  label: Global Login Session Max Timeout (in seconds)
  description: Set the max timeout for a global login session.

- reference: .properties.uaa_session_idle_timeout
  label: Global Login Session Idle Timeout (in seconds)
  description: Set the max timeout for idle global login sessions.

- reference: .uaa.customize_username_label
  label: Customize Username Label (on login page)
  description: The text used to prompt for a username during login

- reference: .uaa.customize_password_label
  label: Customize Password Label (on login page)
  description: The text used to prompt for a password during login

- reference: .uaa.proxy_ips_regex
  label: Proxy IPs Regular Expression
  description: |
    A pipe ("|") delimited set of regular expressions of IP addresses that are
    considered reverse proxies. When a request from these IP addresses come
    in, the X-FORWARDED-FOR and X-FORWARDED-PROTO headers will be respected.
