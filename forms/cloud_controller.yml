---
name: cloud_controller
label: Cloud Controller
description: Configure the Cloud Controller

property_inputs:
  - reference: .cloud_controller.encrypt_key
    label: Cloud Controller DB Encryption Key
    description: |
      Leave blank unless restoring a Cloud Controller Database exported from
      a previous installation.

  - reference: .properties.cc_api_rate_limit
    label: |
      Enabling CF API Rate Limiting will prevent API consumers from
      overwhelming the platform API servers. Limits are imposed on a per-user
      or per-client basis and reset on an hourly interval.
    selector_property_inputs:
      - reference: .properties.cc_api_rate_limit.enable
        label: Enable
        property_inputs:
          - reference: .properties.cc_api_rate_limit.enable.general_limit
            label: General Limit
            description: |
              The number of requests a user or client is allowed to make for
              all endpoints that do not have a custom limit over an hour
              interval.

          - reference: .properties.cc_api_rate_limit.enable.unauthenticated_limit
            label: Unauthenticated Limit
            description: |
              The number of requests an unauthenticated client is allowed to
              make over an hour interval.

      - reference: .properties.cc_api_rate_limit.disable
        label: Disable

  - reference: .properties.ccdb_connection_validation_timeout
    label: Database Connection Validation Timeout
    description: |
      The connection validation timeout in seconds. Note that setting this to -1 results
      in an additional query whenever connections are checked out from the pool, which
      can have performance implications.

  - reference: .properties.ccdb_read_timeout
    label: Database Read Timeout
    description: |
      The read timeout for query responses in seconds.

  - reference: .properties.cloud_controller_completed_tasks_cutoff_age_in_days
    label: |
      Age in days after which completed tasks will be pruned from the Cloud Controller Database.

  - reference: .properties.cloud_controller_encryption_keys
    label: |
      Encryption Key Ledger
    description: |-
      Each Label & Key pair entered here is a key that the CC will know how to encrypt and decrypt in the CCDB.
      These should not be deleted.
    property_inputs:
      - reference: label
        label: Encryption Key Label
      - reference: encryption_key
        label: Encryption Key
      - reference: primary
        label: Primary
        description: |
          Checking this checkbox marks this key as the primary encryption key.
          Only one key can be marked as primary.
