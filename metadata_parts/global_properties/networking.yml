---
property_blueprints:
  - name: networking_point_of_entry
    type: selector
    configurable: true
    default: haproxy
    option_templates:
      - name: external_ssl
        select_value: external_ssl
        property_blueprints:
          - name: ssl_ciphers
            type: text
            configurable: true
            optional: true
      - name: external_non_ssl
        select_value: external_non_ssl
      - name: haproxy
        select_value: haproxy
        property_blueprints:
          - name: disable_http
            type: boolean
            configurable: true
            default: false
          - name: ssl_ciphers
            type: text
            configurable: true
            optional: true
          - name: max_buffer_size
            type: integer
            configurable: true
            default: 16384

  - name: networking_poe_ssl_cert
    type: rsa_cert_credentials
    configurable: true

  - name: tcp_routing
    type: selector
    configurable: true
    default: disable
    option_templates:
    - name: disable
      select_value: disable
      named_manifests:
        - name: default_router_group
          manifest: |
            []
    - name: enable
      select_value: enable
      named_manifests:
        - name: default_router_group
          manifest: |
            - name: default-tcp
              reservable_ports: (( .properties.tcp_routing.enable.reservable_ports.value ))
              type: tcp
      property_blueprints:
        - name: reservable_ports
          type: string
          configurable: true
          placeholder: "e.g: 1024-10000,65535"

  - name: route_services
    type: selector
    configurable: true
    default: enable
    option_templates:
      - name: enable
        select_value: enable
        named_manifests:
          - name: secret
            manifest: |
              (( .router.route_services_secret.value ))
        property_blueprints:
          - name: ignore_ssl_cert_verification
            type: boolean
            configurable: true
            default: false
      - name: disable
        select_value: disable
        named_manifests:
          - name: secret
            manifest: |

  - name: container_networking
    type: selector
    configurable: true
    default: enable
    option_templates:
      - name: enable
        select_value: enable
        named_manifests:
          - name: cf_networking_disabled
            manifest: |
              false
          - name: garden_network_plugin
            manifest: |
              "/var/vcap/packages/runc-cni/bin/garden-external-networker"
          - name: garden_network_plugin_extra_args
            manifest: |
              - "--configFile=/var/vcap/jobs/garden-cni/config/adapter.json"
        property_blueprints:
          - name: network_cidr
            type: string
            configurable: true
            optional: true
          - name: vtep_port
            type: integer
            configurable: true
            default: 4789
      - name: disable
        select_value: disable
        named_manifests:
          - name: cf_networking_disabled
            manifest: |
              true
          - name: garden_network_plugin
          - name: garden_network_plugin_extra_args
            manifest: |
              []
        property_blueprints:
          - name: garden_network_pool
            type: string
            configurable: true
            default: 10.254.0.0/22

  - name: network_policy_server_cert
    type: rsa_cert_credentials
    default:
      domains:
        - network-policy-server.service.cf.internal
        - "*.network-policy-server.service.cf.internal"

  - name: network_policy_agent_cert
    type: rsa_cert_credentials
