---
name: vxlan-policy-agent
release: silk
consumes: |
  cf_network: { from: cf_network, deployment: ((  ..cf.deployment_name  )) }
manifest: |
  ca_cert: (( $ops_manager.ca_certificate ))
  client_cert: (( ..cf.properties.network_policy_agent_cert.cert_pem ))
  client_key: (( ..cf.properties.network_policy_agent_cert.private_key_pem ))
  disable: (( ..cf.properties.container_networking_interface_plugin.selected_option.parsed_manifest(disable_silk) ))
  iptables_accepted_udp_logs_per_sec: (( ..cf.properties.container_networking_interface_plugin.silk.iptables_accepted_udp_logs_per_sec.value ))
  iptables_logging: (( ..cf.properties.container_networking_interface_plugin.silk.enable_log_traffic.value ))
  disable_container_network_policy: (( .properties.disable_silk_policy_enforcement.value ))
  policy_server:
    hostname: network-policy-server.service.cf.internal
