---
name: diego_cell
label: Diego Cell
resource_label: Diego Cell
description: Diego Cell
templates:
{{if eq tile "ert"}}
- $( job "consul_agent_diego_cell" )
- $( job "rep" )
- $( job "route_emitter" )
- $( job "cfdot" )
- $( job "garden" )
- $( job "cflinuxfs2-rootfs-setup_diego_cell" )
- $( job "metron_agent" )
- $( job "silk-cni" )
- $( job "silk-daemon" )
- $( job "garden-cni" )
- $( job "netmon" )
- $( job "vxlan-policy-agent" )
- $( job "nfsv3driver" )
- $( job "syslog_forwarder" )
- $( job "bosh-dns-adapter" )
- $( job "iptables-logger" )
{{else}}
- $( job "placeholder" )
{{end}}

resource_definitions:
- name: ram
  type: integer
  label: RAM
  configurable: true
  default: 16384
  constraints:
    min: 2048
- name: ephemeral_disk
  type: integer
  label: Ephemeral Disk
  configurable: true
  default: 65536
  constraints:
    min: 4096
- name: persistent_disk
  type: integer
  label: Persistent Disk
  configurable: false
  default: 0
- name: cpu
  type: integer
  label: CPU
  configurable: true
  default: 2
  constraints:
    min: 1
static_ip: 0
dynamic_ip: 1
max_in_flight: 4%
single_az_only: false
instance_definition:
  name: instances
  type: integer
  label: Instances
  configurable: $( variable "diego_cell_configurable_state" )
  default: $( variable "diego_cell_default_instances" )
  constraints:
    min: $( variable "diego_cell_min_instances" )
property_blueprints:
  - name: executor_disk_capacity
    type: integer
    label: Cell Disk Capacity (in MB)
    configurable: true
    optional: true
    constraints:
      min: 1

  - name: executor_memory_capacity
    type: integer
    label: Cell Memory Capacity (in MB)
    configurable: true
    optional: true
    constraints:
      min: 1

  - name: insecure_docker_registry_list
    type: string_list
    configurable: true
    optional: true
