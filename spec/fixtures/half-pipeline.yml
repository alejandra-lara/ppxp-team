---
resources:
- name: some-resource
  type: git
- name: another-resource
  type: s3
  source:
    some_key: just-a-key
jobs:
- name: a-generic-job
  plan:
  - get: a-get-task
    resource: some-resource
  - task: a-generic-task
- name: destroy-environment-aws-clean
  plan:
  - get: environment
    resource: environment-aws
    trigger: true
    passed:
    - claim-environment-aws-clean
  - task: destroy
    tags:
    - aws
    file: p-runtime/ci/jobs/destroy-environment.yml
- name: deploy-ops-manager-aws-clean
  plan:
  - task: some-task
- name: configure-microbosh-aws-clean
  plan:
  - get: p-runtime
    passed:
    - deploy-ops-manager-aws-clean
  - get: environment
    resource: environment-aws-clean
    passed:
    - deploy-ops-manager-aws-clean
- name: configure-ert-aws-clean
  plan:
  - task: some-task
    tags:
    - aws
    resource: environment-aws
  - task: some-aws-task
    tags: aws
- name: another-job-aws-clean
  plan:
  - task: another-task
    tags:
    - aws
    resource: environment-aws
- name: destroy-environment-final-aws-clean
  plan:
  - get: environment
    resource: environment-aws
    trigger: true
    passed:
    - claim-environment-aws-clean
  - task: destroy
    tags:
    - aws
    file: p-runtime/ci/jobs/destroy-environment.yml
- name: destroy-environment-internetless
  plan:
  - get: environment
    resource: environment-internetless
    trigger: true
    passed:
    - claim-environment-internetless
  - task: destroy
    tags:
    - vsphere
    file: p-runtime/ci/jobs/destroy-environment.yml
- name: deploy-ops-manager-internetless
  plan:
  - task: some-task
- name: verify-internetless
  plan:
  - task: verify
- name: configure-microbosh-internetless
  plan:
  - get: p-runtime
    passed:
    - verify-internetless
  - get: environment
    resource: environment-internetless
    passed:
    - verify-internetless
- name: configure-ert-internetless
  plan:
  - task: some-task
    tags:
    - vsphere
    resource: environment-internetless
- name: another-job-internetless
  plan:
  - task: another-task
    tags:
    - vsphere
    resource: environment-internetless
- name: destroy-environment-final-internetless
  plan:
  - get: environment
    resource: environment-internetless
    trigger: true
    passed:
    - claim-environment-internetless
  - task: destroy
    tags:
    - vsphere
    file: p-runtime/ci/jobs/destroy-environment.yml
- name: destroy-environment-aws-upgrade
  plan:
  - get: environment
    resource: environment-aws-east
    trigger: true
    passed:
    - claim-environment-aws-upgrade
  - task: destroy
    tags:
    - aws
    file: p-runtime/ci/jobs/destroy-environment.yml
- name: deploy-ops-manager-aws-upgrade
  plan:
  - task: some-task
- name: configure-microbosh-aws-upgrade
  plan:
  - get: p-runtime
    passed:
    - deploy-ops-manager-aws-upgrade
  - get: environment
    resource: environment-aws-upgrade
    passed:
    - deploy-ops-manager-aws-upgrade
- name: configure-ert-aws-upgrade
  plan:
  - task: some-task
    tags:
    - aws
    resource: environment-aws-east
  - task: some-aws-upgrade-task
    tags: aws
- name: another-job-aws-upgrade
  plan:
  - task: another-task
    tags:
    - aws
    resource: environment-aws-east
- name: destroy-environment-final-aws-upgrade
  plan:
  - get: environment
    resource: environment-aws-east
    trigger: true
    passed:
    - claim-environment-aws-upgrade
  - task: destroy
    tags:
    - aws
    file: p-runtime/ci/jobs/destroy-environment.yml
- name: destroy-environment-vsphere-upgrade
  plan:
  - get: environment
    resource: environment-vsphere
    trigger: true
    passed:
    - claim-environment-vsphere-upgrade
  - task: destroy
    tags:
    - vsphere
    file: p-runtime/ci/jobs/destroy-environment.yml
- name: deploy-ops-manager-vsphere-upgrade
  plan:
  - task: some-task
- name: configure-microbosh-vsphere-upgrade
  plan:
  - get: p-runtime
    passed:
    - deploy-ops-manager-vsphere-upgrade
  - get: environment
    resource: environment-vsphere-upgrade
    passed:
    - deploy-ops-manager-vsphere-upgrade
- name: configure-ert-vsphere-upgrade
  plan:
  - task: some-task
    tags:
    - vsphere
    resource: environment-vsphere
- name: another-job-vsphere-upgrade
  plan:
  - task: another-task
    tags:
    - vsphere
    resource: environment-vsphere
- name: destroy-environment-final-vsphere-upgrade
  plan:
  - get: environment
    resource: environment-vsphere
    trigger: true
    passed:
    - claim-environment-vsphere-upgrade
  - task: destroy
    tags:
    - vsphere
    file: p-runtime/ci/jobs/destroy-environment.yml
