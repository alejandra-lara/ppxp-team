---
name: bosh-dns-aliases
runtime_config: |
  releases:
  - $( release "bosh-dns-aliases" )
  addons:
  - name: bosh-dns-aliases
    jobs:
    - name: bosh-dns-aliases
      release: bosh-dns-aliases
      properties:
        aliases:
        - domain: auctioneer.service.cf.internal
          targets:
          - query: "q-s4" # all instances, regardless of health (clients retry)
            instance_group: $( variable "bosh_dns_auctioneer_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: bbs.service.cf.internal
          targets:
          - query: "q-s4" # all instances, regardless of health (clients retry)
            instance_group: $( variable "bosh_dns_bbs_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: blobstore.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_blobstore_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: cc-uploader.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_cc_uploader_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: cell.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_cell_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
          - query: "*"
            instance_group: "isolated_diego_cell*"
            deployment: "p-isolation-segment-*"
            network: "*"
            domain: bosh
          - query: "*"
            instance_group: "windows_diego_cell*"
            deployment: "p-windows-runtime-*"
            network: "*"
            domain: bosh
          - query: "*"
            instance_group: "windows_diego_cell*"
            deployment: "pas-windows-*"
            network: "*"
            domain: bosh
        - domain: _.cell.service.cf.internal
          targets:
          - query: "_"
            instance_group: $( variable "bosh_dns_cell_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
          - query: "_"
            instance_group: "isolated_diego_cell*"
            deployment: "p-isolation-segment-*"
            network: "*"
            domain: bosh
          - query: "_"
            instance_group: "windows_diego_cell*"
            deployment: "p-windows-runtime-*"
            network: "*"
            domain: bosh
          - query: "_"
            instance_group: "windows_diego_cell*"
            deployment: "pas-windows-*"
            network: "*"
            domain: bosh
        - domain: cloud-controller-ng.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_cloud_controller_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: copilot.service.cf.internal
          targets:
          - query: "*"
            instance_group: "istio_control"
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: credhub.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_credhub_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: doppler.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_doppler_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: file-server.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_file_server_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: locket.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_locket_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: loggregator-trafficcontroller.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_loggregator_trafficcontroller_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: mysql.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_mysql_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: network-policy-server.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_network_policy_server_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: pilot.service.cf.internal
          targets:
          - query: "*"
            instance_group: "istio_control"
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: reverse-log-proxy.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_reverse_log_proxy_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: routing-api.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_routing_api_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: silk-controller.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_silk_controller_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: ssh-proxy.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_ssh_proxy_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
        - domain: uaa.service.cf.internal
          targets:
          - query: "*"
            instance_group: $( variable "bosh_dns_uaa_instance_group" )
            deployment: (( ..cf.deployment_name ))
            network: (( ..cf.network_name ))
            domain: bosh
