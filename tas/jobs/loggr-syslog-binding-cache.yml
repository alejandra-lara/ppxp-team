---
name: loggr-syslog-binding-cache
release: loggregator-agent
provides: |
  binding_cache: {as: binding_cache, shared: true}
manifest: |

  logging:
    format:
      timestamp: (( .properties.logging_timestamp_format.selected_option.parsed_manifest(rfc3339_or_deprecated) ))
  external_port: 9000
  tls:
    ca_cert: (( $ops_manager.ca_certificate ))
    cert: (( .properties.binding_cache_api_tls.cert_pem ))
    key: (( .properties.binding_cache_api_tls.private_key_pem ))
    cn: binding-cache
  metrics:
    ca_cert: (( $ops_manager.ca_certificate ))
    cert: (( .properties.loggr_syslog_binding_cache_metrics_tls.cert_pem ))
    key: (( .properties.loggr_syslog_binding_cache_metrics_tls.private_key_pem ))
    server_name: loggr_syslog_binding_cache_metrics
  api:
    tls:
      ca_cert: (( $ops_manager.ca_certificate ))
      cert: (( .properties.cloud_controller_client_cert.cert_pem ))
      key: (( .properties.cloud_controller_client_cert.private_key_pem ))
      cn: cloud-controller-ng.service.cf.internal