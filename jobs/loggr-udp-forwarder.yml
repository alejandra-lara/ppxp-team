---
name: loggr-udp-forwarder
release: loggregator-agent
consumes: |
  cloud_controller:
    from: cloud_controller
    deployment: (( ..cf.deployment_name ))
manifest: |
  logging:
    format:
      timestamp: (( ..cf.properties.logging_timestamp_format.selected_option.parsed_manifest(rfc3339_or_deprecated) ))
  loggregator:
    tls:
      ca: (( $ops_manager.ca_certificate ))
      cert: (( .properties.loggregator_agent_tls_cert.cert_pem ))
      key: (( .properties.loggregator_agent_tls_cert.private_key_pem ))
  metrics:
    ca_cert: (( $ops_manager.ca_certificate ))
    cert: (( .properties.loggr_udp_forwarder_tls.cert_pem ))
    key: (( .properties.loggr_udp_forwarder_tls.private_key_pem ))
    server_name: loggr-udp-forwarder-metrics
