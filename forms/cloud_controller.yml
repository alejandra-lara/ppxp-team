---
name: cloud_controller
label: Cloud Controller
description: Configure the Cloud Controller

property_inputs:
  - reference: .cloud_controller.encrypt_key
    label: Cloud Controller DB Encryption Key
    description: |
      Leave blank unless restoring a Cloud Controller Database exported from
      a previous installation.

  - reference: .properties.cc_api_rate_limit
    label: |
      Enabling CF API Rate Limiting will prevent API consumers from
      overwhelming the platform API servers. Limits are imposed on a per-user
      or per-client basis and reset on an hourly interval.
    selector_property_inputs:
      - reference: .properties.cc_api_rate_limit.enable
        label: Enable
        property_inputs:
          - reference: .properties.cc_api_rate_limit.enable.general_limit
            label: General Limit
            description: |
              The number of requests a user or client is allowed to make for
              all endpoints that do not have a custom limit over an hour
              interval.

          - reference: .properties.cc_api_rate_limit.enable.unauthenticated_limit
            label: Unauthenticated Limit
            description: |
              The number of requests an unauthenticated client is allowed to
              make over an hour interval.

      - reference: .properties.cc_api_rate_limit.disable
        label: Disable

  - reference: .properties.ccdb_connection_validation_timeout
    label: Database Connection Validation Timeout
    description: |
      The connection validation timeout in seconds. Note that setting this to -1 results
      in an additional query whenever connections are checked out from the pool, which
      can have performance implications.

  - reference: .properties.ccdb_read_timeout
    label: Database Read Timeout
    description: |
      The read timeout for query responses in seconds.

  - reference: .properties.cloud_controller_default_stack
    label: |
      Default stack (rootfs) for newly created apps
    selector_property_inputs:
      - reference: .properties.cloud_controller_default_stack.default
        label: Platform default (currently 'cflinuxfs3')
      - reference: .properties.cloud_controller_default_stack.cflinuxfs3
        label: cflinuxfs3
      - reference: .properties.cloud_controller_default_stack.cflinuxfs2
        label: cflinuxfs2
