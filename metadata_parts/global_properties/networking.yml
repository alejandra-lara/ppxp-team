---
property_blueprints:
  - name: networking_point_of_entry
    type: selector
    configurable: true
    default: haproxy
    option_templates:
      - name: external_non_ssl
        select_value: external_non_ssl
      - name: haproxy
        select_value: haproxy
        property_blueprints:
          - name: disable_http
            type: boolean
            configurable: true
            default: false
          - name: max_buffer_size
            type: integer
            configurable: true
            default: 16384

  - name: networking_poe_ssl_cert
    type: rsa_cert_credentials
    configurable: true

  - name: ssl_ciphers
    type: text
    configurable: true
    default: DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384

  - name: tcp_routing
    type: selector
    configurable: true
    default: disable
    option_templates:
    - name: disable
      select_value: disable
      named_manifests:
        - name: default_router_group
          manifest: |
            []
    - name: enable
      select_value: enable
      named_manifests:
        - name: default_router_group
          manifest: |
            - name: default-tcp
              reservable_ports: (( .properties.tcp_routing.enable.reservable_ports.value ))
              type: tcp
      property_blueprints:
        - name: reservable_ports
          type: string
          configurable: true
          placeholder: "e.g: 1024-10000,65535"

  - name: router_forward_client_cert
    type: selector
    configurable: true
    default: always_forward
    option_templates:
      - name: always_forward
        select_value: always_forward
      - name: forward
        select_value: forward
      - name: sanitize_set
        select_value: sanitize_set

  - name: route_services
    type: selector
    configurable: true
    default: enable
    option_templates:
      - name: enable
        select_value: enable
        named_manifests:
          - name: secret
            manifest: |
              (( .router.route_services_secret.value ))
        property_blueprints:
          - name: ignore_ssl_cert_verification
            type: boolean
            configurable: true
            default: false
      - name: disable
        select_value: disable
        named_manifests:
          - name: secret
            manifest: |

  - name: container_networking_network_cidr
    type: string
    configurable: true
    optional: true

  - name: container_networking_vtep_port
    type: integer
    configurable: true
    default: 4789

  - name: container_networking_log_traffic
    type: selector
    configurable: true
    default: disable
    option_templates:
    - name: enable
      select_value: enable
      property_blueprints:
      - name: iptables_denied_logs_per_sec
        type: integer
        configurable: true
        default: 1
      - name: iptables_accepted_udp_logs_per_sec
        type: integer
        configurable: true
        default: 100

    - name: disable
      select_value: disable

  - name: network_policy_server_cert
    type: rsa_cert_credentials
    default:
      domains:
        - network-policy-server.service.cf.internal
        - "*.network-policy-server.service.cf.internal"

  - name: network_policy_agent_cert
    type: rsa_cert_credentials
